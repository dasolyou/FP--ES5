<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>4. 자바스크립트에서의 지연 평가</title>
  
</head>
<body>
  <script src="js/partial.js"></script>
  <script>
  // 지연 평가를 시작 시키고 유지 시키는(이어 가는) 함수
    // 1. map
    // 2. filter, reject
    var mi = 0;
    var fi = 0;
    _.go(
      _.range(100),
      _.map(function(val) {
        ++mi; // loop를 100번 돌아
        return val * val;
      }),
      _.filter(function(val) {
        ++fi; // loop를 100번 돌아
        return val % 2;
      }),
      _.take(5), // 5개 꺼내
      console.log
    );
    console.log(mi, fi); // 100, 100
    
    // 지연평가 적용
    var mi = 0;
    var fi = 0;
    _.go(
      _.range(100),
      L.map(function(val) {
        ++mi; // loop를 100번 돌아
        return val * val;
      }),
      L.filter(function(val) {
        ++fi; // loop를 100번 돌아
        return val % 2;
      }),
      L.take(5), // 5개 꺼내
      console.log
    );
    console.log(mi, fi); // 10, 10 -> 로직의 마지막, 5개를 꺼내는 데 필요한 만큼만 루프를 돌아

  // 끝을 내는 함수
    // 1. take
    // 2. some, every, find
  </script>
</body>
</html>